# üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

1. **[API_DASHBOARD_SUMMARY.md](./API_DASHBOARD_SUMMARY.md)** - –°–≤–æ–¥–∫–∞ –ø–æ –¥–µ–±–∏—Ç–æ—Ä—Å–∫–æ–π –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏
   - –û–±—â–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –î–ó
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç–∞—Ä–µ–Ω–∏—è (aging buckets)
   - –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç–∏
   - –ú–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π

2. **[API_INVOICES_LIST.md](./API_INVOICES_LIST.md)** ‚ú® **–ù–û–í–û–ï** - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—á–µ—Ç–∞—Ö
   - –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª–µ–π —Å—á–µ—Ç–∞
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º, –∫–ª–∏–µ–Ω—Ç–∞–º, –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º
   - –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
   - –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–µ–π—Å–æ–≤

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü–æ–ª—É—á–∏—Ç—å –æ–±—â—É—é —Å–≤–æ–¥–∫—É –ø–æ –î–ó

```bash
GET /api/v1/reports/dashboard/summary
Authorization: Bearer YOUR_TOKEN
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (—Å—É–º–º—ã, –ø—Ä–æ—Ü–µ–Ω—Ç—ã, —Å—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è)

### –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—á–µ—Ç–∞—Ö

```bash
GET /api/v1/reports/invoices
Authorization: Bearer YOUR_TOKEN
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: –ú–∞—Å—Å–∏–≤ —Å—á–µ—Ç–æ–≤ —Å **–ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π** –ø–æ –∫–∞–∂–¥–æ–º—É –ø–æ–ª—é:
- ID –∏ –Ω–æ–º–µ—Ä —Å—á–µ—Ç–∞
- –î–∞—Ç—ã (–≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è, –æ–ø–ª–∞—Ç—ã, —Å—Ä–æ–∫–∏)
- –°—É–º–º—ã (–æ–±—â–∞—è, –æ–ø–ª–∞—á–µ–Ω–æ, –æ—Å—Ç–∞—Ç–æ–∫)
- –°—Ç–∞—Ç—É—Å—ã (–±–∞–∑–æ–≤—ã–π, —Ä–∞–±–æ—Ç—ã —Å –¥–æ–ª–≥–æ–º)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ, –º–µ–Ω–µ–¥–∂–µ—Ä–µ, –¥–æ–≥–æ–≤–æ—Ä–µ
- –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—á–µ—Ç–∞ (–ø–æ–ª–Ω–∞—è)

–í—Å–µ –ø–æ–ª—è, –¥–æ—Å—Ç—É–ø–Ω—ã–µ —á–µ—Ä–µ–∑ `GET /api/v1/reports/invoices`:

```json
{
  "id": "6916bf8cc37d74fc70084f2d",
  "invoiceNumber": "–ê–ö–¢-2025-UNP-STAGE3",
  "customerId": "6916bef2c37d74fc70084f07",
  "customer": {
    "id": "6916bef2c37d74fc70084f07",
    "name": "–û–û–û \"–£–Ω–∏–≤–µ—Ä—Å–∞–ª\"",
    "unp": "12345678",
    "userId": "507f1f77bcf86cd799439011"
  },
  "issueDate": "2025-09-30T00:00:00.000Z",
  "dueDate": "2025-10-13T00:00:00.000Z",
  "serviceStartDate": "2025-08-20T00:00:00.000Z",
  "serviceEndDate": "2025-09-30T00:00:00.000Z",
  "totalAmount": 5000,
  "paidAmount": 3000,
  "outstandingAmount": 2000,
  "paymentTermDays": 30,
  "actualPaymentDate": "2025-11-11T00:00:00.000Z",
  "status": "OVERDUE",
  "debtWorkStatus": "CLAIM",
  "serviceType": "OTHER",
  "manager": "–ü–µ—Ç—Ä–æ–≤ –ü.–ü.",
  "contractNumber": "–î-2025-UNP",
  "notes": "–≠—Ç–∞–ø 3: –ß–∞—Å—Ç–∏—á–Ω–æ –ø–æ–≥–∞—à–µ–Ω–æ 3000",
  "lastContactDate": null,
  "contactResult": null,
  "createdAt": "2025-11-14T05:35:08.491Z",
  "updatedAt": "2025-11-14T05:35:08.491Z"
}
```

---

## –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–µ–π—Å—ã

### 1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—á–µ—Ç–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ –£–ù–ü

**–®–∞–≥ 1**: –ù–∞–π—Ç–∏ `customerId` –ø–æ –£–ù–ü —á–µ—Ä–µ–∑ MongoDB:
```javascript
db.customers.findOne({ unp: "12345678" })
```

**–®–∞–≥ 2**: –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—á–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞:
```bash
GET /api/v1/reports/invoices?customerId=<customer_id_from_step1>
```

### 2. –ù–∞–π—Ç–∏ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ —Å—á–µ—Ç–∞ –¥–ª—è –ø—Ä–æ–∑–≤–æ–Ω–∞ (1-30 –¥–Ω–µ–π)

```bash
GET /api/v1/reports/invoices?debtWorkStatus=CALL
```

### 3. –°—á–µ—Ç–∞ —Å bucket 31-60 –¥–Ω–µ–π (–¥–ª—è –ø—Ä–µ—Ç–µ–Ω–∑–∏–æ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã)

```bash
GET /api/v1/reports/invoices?minDaysOverdue=31&maxDaysOverdue=60
```

### 4. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—á–µ—Ç–∞ (–ø—Ä–æ—Å—Ä–æ—á–∫–∞ > 90 –¥–Ω–µ–π –∏ —Å—É–º–º–∞ > 50000)

```bash
GET /api/v1/reports/invoices?minDaysOverdue=91&minAmount=50000&sortBy=totalAmount&sortOrder=desc
```

### 5. –í—Å–µ —Å—á–µ—Ç–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞

```bash
GET /api/v1/reports/invoices?manager=–ü–µ—Ç—Ä–æ–≤
```

---

## –†–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏

### Dashboard Summary (`/dashboard/summary`)

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –°—É–º–º–∞—Ä–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (totalReceivables, overdueReceivables)
- ‚úÖ –ü—Ä–æ—Ü–µ–Ω—Ç—ã –∏ —Å—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ aging buckets
- ‚úÖ –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç–∏
- ‚ùå –ù–ï–¢ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å—á–µ—Ç–∞—Ö
- ‚ùå –ù–ï–¢ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö, –º–µ–Ω–µ–¥–∂–µ—Ä–∞—Ö

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–±—â–µ–π –∫–∞—Ä—Ç–∏–Ω—ã –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ

### Invoices List (`/invoices`)

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: –î–µ—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å—á–µ—Ç–æ–≤
- ‚úÖ –í—Å–µ –ø–æ–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—á–µ—Ç–∞
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ
- ‚úÖ –î–∞—Ç—ã, —Å—É–º–º—ã, —Å—Ç–∞—Ç—É—Å—ã
- ‚úÖ –ú–µ–Ω–µ–¥–∂–µ—Ä—ã, –¥–æ–≥–æ–≤–æ—Ä—ã, –ø—Ä–∏–º–µ—á–∞–Ω–∏—è
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- ‚ùå –ù–ï–¢ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–æ–∫

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Å—á–µ—Ç–∞–º–∏, —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö, –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

---

## –°–≤—è–∑—å –º–µ–∂–¥—É –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

```
API_DASHBOARD_SUMMARY.md (—Å–≤–æ–¥–∫–∞)
     ‚Üì
     –°—Å—ã–ª–∫–∞ –Ω–∞ ‚Üí
     ‚Üì
API_INVOICES_LIST.md (–¥–µ—Ç–∞–ª–∏ —Å—á–µ—Ç–æ–≤)
```

–û–±–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–æ–ø–æ–ª–Ω—è—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞:
- Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **—á—Ç–æ** (–∞–≥—Ä–µ–≥–∞—Ç—ã)
- Invoices –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç **–∫–∞–∫** (–¥–µ—Ç–∞–ª–∏)

---

## –î—Ä—É–≥–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- **[API_1C_INVOICES_DOCUMENTATION.md](../API_1C_INVOICES_DOCUMENTATION.md)** - –ó–∞–≥—Ä—É–∑–∫–∞ —Å—á–µ—Ç–æ–≤ –∏–∑ 1–°
- **[PAYMENT_HISTORY_IMPLEMENTATION.md](../PAYMENT_HISTORY_IMPLEMENTATION.md)** - –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- **[DASHBOARD_API_FIX.md](../DASHBOARD_API_FIX.md)** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Dashboard API
- **[AGING_BUCKETS_API_GUIDE.md](../AGING_BUCKETS_API_GUIDE.md)** - Aging buckets

---

## –í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-11-14  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-11-14  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–∞

