# üìã API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –°–ø–∏—Å–æ–∫ —Å—á–µ—Ç–æ–≤

## Endpoint

```
GET /api/v1/reports/invoices
```

## –û–ø–∏—Å–∞–Ω–∏–µ

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å—á–µ—Ç–æ–≤ —Å –ø–æ–ª–Ω–æ–π –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
- –ü—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö —Å—á–µ—Ç–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º, –∫–ª–∏–µ–Ω—Ç–∞–º, –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º
- –ü–æ–∏—Å–∫–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö —Å—á–µ—Ç–æ–≤
- –ê–Ω–∞–ª–∏–∑–∞ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º

---

## –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**–¢—Ä–µ–±—É–µ—Ç—Å—è**: Bearer Token (JWT)

**–ó–∞–≥–æ–ª–æ–≤–æ–∫**:
```
Authorization: Bearer YOUR_JWT_TOKEN
```

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω**:
```bash
POST /api/v1/auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password"
}
```

---

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã. –ë–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤—Å–µ —Å—á–µ—Ç–∞ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|----------|-----|----------|--------|
| `status` | string | –°—Ç–∞—Ç—É—Å —Å—á–µ—Ç–∞ | `OPEN`, `PAID`, `OVERDUE` |
| `debtWorkStatus` | string | –°—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç—ã —Å –¥–æ–ª–≥–æ–º | `IN_TIME`, `CALL`, `CLAIM`, `PRE_TRIAL`, `TRIAL`, `COLLECTION`, `WRITE_OFF`, `CLOSED` |
| `serviceType` | string | –¢–∏–ø —É—Å–ª—É–≥–∏ | `PKT_SUPPORT`, `KKT_INSTALLATION`, `KKT_SERVICE`, `VENDING_SERVICE`, `VENDING_INSTALLATION`, `OTHER` |
| `manager` | string | –ú–µ–Ω–µ–¥–∂–µ—Ä (—á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ) | `–ò–≤–∞–Ω–æ–≤–∞` |
| `customerId` | string | ID –∫–ª–∏–µ–Ω—Ç–∞ | `507f1f77bcf86cd799439011` |
| `isOverdue` | boolean | –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ —Å—á–µ—Ç–∞ | `true`, `false` |
| `minAmount` | number | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏ | `10000` |
| `maxAmount` | number | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏ | `100000` |
| `dueDateFrom` | string (ISO date) | –°—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã –æ—Ç | `2025-01-01` |
| `dueDateTo` | string (ISO date) | –°—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã –¥–æ | `2025-12-31` |
| `minDaysOverdue` | integer | –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –ø—Ä–æ—Å—Ä–æ—á–∫–∏ | `30` |
| `maxDaysOverdue` | integer | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –ø—Ä–æ—Å—Ä–æ—á–∫–∏ | `60` |

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|--------------|----------|
| `limit` | integer | `50` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ |
| `offset` | integer | `0` | –°–º–µ—â–µ–Ω–∏–µ (–ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å N –∑–∞–ø–∏—Å–µ–π) |
| `sortBy` | string | `dueDate` | –ü–æ–ª–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (`dueDate`, `totalAmount`, `invoiceNumber`, `issueDate`) |
| `sortOrder` | string | `asc` | –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (`asc`, `desc`) |

---

## –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK)

```json
{
  "invoices": [
    {
      "id": "6916bf8cc37d74fc70084f2d",
      "invoiceNumber": "–ê–ö–¢-2025-UNP-STAGE3",
      "customerId": "6916bef2c37d74fc70084f07",
      "customer": {
        "id": "6916bef2c37d74fc70084f07",
        "name": "–û–û–û \"–£–Ω–∏–≤–µ—Ä—Å–∞–ª\"",
        "unp": "12345678",
        "userId": "507f1f77bcf86cd799439011"
      },
      "issueDate": "2025-09-30T00:00:00.000Z",
      "dueDate": "2025-10-13T00:00:00.000Z",
      "serviceStartDate": "2025-08-20T00:00:00.000Z",
      "serviceEndDate": "2025-09-30T00:00:00.000Z",
      "totalAmount": 5000,
      "paidAmount": 3000,
      "outstandingAmount": 2000,
      "paymentTermDays": 30,
      "actualPaymentDate": "2025-11-11T00:00:00.000Z",
      "status": "OVERDUE",
      "debtWorkStatus": "CLAIM",
      "serviceType": "OTHER",
      "manager": "–ü–µ—Ç—Ä–æ–≤ –ü.–ü.",
      "contractNumber": "–î-2025-UNP",
      "notes": "–≠—Ç–∞–ø 3: –ß–∞—Å—Ç–∏—á–Ω–æ –ø–æ–≥–∞—à–µ–Ω–æ 3000",
      "lastContactDate": null,
      "contactResult": null,
      "createdAt": "2025-11-14T05:35:08.491Z",
      "updatedAt": "2025-11-14T05:35:08.491Z"
    }
  ],
  "total": 1,
  "limit": 50,
  "offset": 0
}
```

### –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (401 Unauthorized)

```json
{
  "status": "fail",
  "message": "–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏: —Ç–æ–∫–µ–Ω –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω."
}
```

### –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (500 Internal Server Error)

```json
{
  "status": "error",
  "message": "–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ —Å—á–µ—Ç–æ–≤"
}
```

---

## –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π –æ—Ç–≤–µ—Ç–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—á–µ—Ç–∞ (Invoice)

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `id` | string | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å—á–µ—Ç–∞ |
| `invoiceNumber` | string | –ù–æ–º–µ—Ä —Å—á–µ—Ç–∞/–∞–∫—Ç–∞ |
| `customerId` | string | ID –∫–ª–∏–µ–Ω—Ç–∞ |
| `customer` | object | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –¥–µ–ª–∞–µ—Ç—Å—è populate) |
| `customer.id` | string | ID –∫–ª–∏–µ–Ω—Ç–∞ |
| `customer.name` | string | –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ |
| `customer.unp` | string | –£–ù–ü/–ò–ù–ù –∫–ª–∏–µ–Ω—Ç–∞ |
| `customer.userId` | string | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–æ–∑–¥–∞–≤—à–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ |
| `issueDate` | string (ISO date) | –î–∞—Ç–∞ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç–∞ |
| `dueDate` | string (ISO date) | –°—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã |
| `serviceStartDate` | string (ISO date) | –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –æ–∫–∞–∑–∞–Ω–∏—è —É—Å–ª—É–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |
| `serviceEndDate` | string (ISO date) | –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è —É—Å–ª—É–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |
| `totalAmount` | number | –û–±—â–∞—è —Å—É–º–º–∞ —Å—á–µ—Ç–∞ |
| `paidAmount` | number | –°—É–º–º–∞ –æ–ø–ª–∞—á–µ–Ω–æ |
| `outstandingAmount` | number | –û—Å—Ç–∞—Ç–æ–∫ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏ (–≤—ã—á–∏—Å–ª—è–µ–º–æ–µ: `totalAmount - paidAmount`) |
| `paymentTermDays` | number | –°—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã –≤ –¥–Ω—è—Ö |
| `actualPaymentDate` | string (ISO date) –∏–ª–∏ null | –î–∞—Ç–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –æ–ø–ª–∞—Ç—ã |
| `status` | string | –°—Ç–∞—Ç—É—Å —Å—á–µ—Ç–∞ |
| `debtWorkStatus` | string | –°—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç—ã —Å –¥–æ–ª–≥–æ–º |
| `serviceType` | string | –¢–∏–ø —É—Å–ª—É–≥–∏ |
| `manager` | string | –ú–µ–Ω–µ–¥–∂–µ—Ä, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞ –∫–ª–∏–µ–Ω—Ç–∞ |
| `contractNumber` | string | –ù–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–∞ |
| `notes` | string | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
| `lastContactDate` | string (ISO date) –∏–ª–∏ null | –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞ |
| `contactResult` | string –∏–ª–∏ null | –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞ |
| `createdAt` | string (ISO date) | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ |
| `updatedAt` | string (ISO date) | –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

### –°—Ç–∞—Ç—É—Å—ã —Å—á–µ—Ç–∞ (`status`)

| –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `OPEN` | –û—Ç–∫—Ä—ã—Ç (–Ω–µ –æ–ø–ª–∞—á–µ–Ω, —Å—Ä–æ–∫ –Ω–µ –∏—Å—Ç–µ–∫) |
| `PAID` | –û–ø–ª–∞—á–µ–Ω |
| `OVERDUE` | –ü—Ä–æ—Å—Ä–æ—á–µ–Ω |

### –°—Ç–∞—Ç—É—Å—ã —Ä–∞–±–æ—Ç—ã —Å –¥–æ–ª–≥–æ–º (`debtWorkStatus`)

| –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–æ—Å—Ä–æ—á–∫–∞ |
|----------|----------|-----------|
| `IN_TIME` | –í —Å—Ä–æ–∫ | –°—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã –Ω–µ –Ω–∞—Å—Ç—É–ø–∏–ª |
| `CALL` | –ü—Ä–æ–∑–≤–æ–Ω | 1-30 –¥–Ω–µ–π |
| `CLAIM` | –ü—Ä–µ—Ç–µ–Ω–∑–∏—è | 31-60 –¥–Ω–µ–π |
| `PRE_TRIAL` | –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Å—É–¥—É | 61-90 –¥–Ω–µ–π |
| `TRIAL` | –°—É–¥ | 91-180 –¥–Ω–µ–π |
| `COLLECTION` | –í–∑—ã—Å–∫–∞–Ω–∏–µ | > 180 –¥–Ω–µ–π |
| `WRITE_OFF` | –°–ø–∏—Å–∞–Ω–∏–µ | –ë–µ–∑–Ω–∞–¥–µ–∂–Ω—ã–π –¥–æ–ª–≥ |
| `CLOSED` | –ó–∞–∫—Ä—ã—Ç | –î–æ–ª–≥ –æ–ø–ª–∞—á–µ–Ω |

### –¢–∏–ø—ã —É—Å–ª—É–≥ (`serviceType`)

| –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `PKT_SUPPORT` | –°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –ü–ö–¢ |
| `KKT_INSTALLATION` | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ö–ö–¢ |
| `KKT_SERVICE` | –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –ö–ö–¢ |
| `VENDING_SERVICE` | –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤ |
| `VENDING_INSTALLATION` | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∞ |
| `OTHER` | –ü—Ä–æ—á–µ–µ |

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `total` | integer | –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π (–≤—Å–µ–≥–æ) |
| `limit` | integer | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ |
| `offset` | integer | –°–º–µ—â–µ–Ω–∏–µ (–ø—Ä–æ–ø—É—â–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π) |

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ —Å—á–µ—Ç–∞

```bash
curl -X GET "http://localhost:3001/api/v1/reports/invoices?isOverdue=true&sortBy=dueDate&sortOrder=asc" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json"
```

### –ü—Ä–∏–º–µ—Ä 2: –°—á–µ—Ç–∞ —Å –ø—Ä–æ—Å—Ä–æ—á–∫–æ–π 31-60 –¥–Ω–µ–π

```bash
curl -X GET "http://localhost:3001/api/v1/reports/invoices?minDaysOverdue=31&maxDaysOverdue=60" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json"
```

### –ü—Ä–∏–º–µ—Ä 3: –°—á–µ—Ç–∞ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –º–µ–Ω–µ–¥–∂–µ—Ä—É

```bash
curl -X GET "http://localhost:3001/api/v1/reports/invoices?manager=–ü–µ—Ç—Ä–æ–≤" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json"
```

### –ü—Ä–∏–º–µ—Ä 4: –°—á–µ—Ç–∞ –≤ —Å—Ç–∞—Ç—É—Å–µ "–ü—Ä–µ—Ç–µ–Ω–∑–∏—è"

```bash
curl -X GET "http://localhost:3001/api/v1/reports/invoices?debtWorkStatus=CLAIM&limit=20" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json"
```

### –ü—Ä–∏–º–µ—Ä 5: –°—á–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ –£–ù–ü (—á–µ—Ä–µ–∑ customerId)

–°–Ω–∞—á–∞–ª–∞ –Ω–∞–π–¥–∏—Ç–µ customerId –ø–æ –£–ù–ü —á–µ—Ä–µ–∑ API –∫–ª–∏–µ–Ω—Ç–æ–≤, –∑–∞—Ç–µ–º:

```bash
curl -X GET "http://localhost:3001/api/v1/reports/invoices?customerId=6916bef2c37d74fc70084f07" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json"
```

### –ü—Ä–∏–º–µ—Ä 6: –°—á–µ—Ç–∞ —Å –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å—é > 10000 —Ä—É–±–ª–µ–π

```bash
curl -X GET "http://localhost:3001/api/v1/reports/invoices?minAmount=10000&sortBy=totalAmount&sortOrder=desc" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json"
```

### –ü—Ä–∏–º–µ—Ä 7: –ü–∞–≥–∏–Ω–∞—Ü–∏—è (–≤—Ç–æ—Ä–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ 20 –∑–∞–ø–∏—Å–µ–π)

```bash
curl -X GET "http://localhost:3001/api/v1/reports/invoices?limit=20&offset=20" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json"
```

### JavaScript (Fetch API)

```javascript
const token = 'YOUR_JWT_TOKEN';

// –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ —Å—á–µ—Ç–∞
const response = await fetch(
  'http://localhost:3001/api/v1/reports/invoices?isOverdue=true',
  {
    method: 'GET',
    headers: {
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json'
    }
  }
);

const data = await response.json();
console.log(`–ù–∞–π–¥–µ–Ω–æ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö —Å—á–µ—Ç–æ–≤: ${data.total}`);
console.log('–°—á–µ—Ç–∞:', data.invoices);
```

### Python (requests)

```python
import requests

token = 'YOUR_JWT_TOKEN'
headers = {
    'Authorization': f'Bearer {token}',
    'Content-Type': 'application/json'
}

# –ü–æ–ª—É—á–∏—Ç—å —Å—á–µ—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
params = {
    'isOverdue': 'true',
    'minDaysOverdue': 30,
    'limit': 10
}

response = requests.get(
    'http://localhost:3001/api/v1/reports/invoices',
    headers=headers,
    params=params
)

data = response.json()
print(f"–í—Å–µ–≥–æ —Å—á–µ—Ç–æ–≤: {data['total']}")
for invoice in data['invoices']:
    print(f"{invoice['invoiceNumber']}: {invoice['outstandingAmount']} —Ä—É–±.")
```

---

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∫–µ–π—Å—ã

### –ö–µ–π—Å 1: –ù–∞–π—Ç–∏ –≤—Å–µ —Å—á–µ—Ç–∞ –¥–ª—è –ø—Ä–æ–∑–≤–æ–Ω–∞ (1-30 –¥–Ω–µ–π –ø—Ä–æ—Å—Ä–æ—á–∫–∏)

```bash
GET /api/v1/reports/invoices?debtWorkStatus=CALL&sortBy=dueDate&sortOrder=asc
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°–ø–∏—Å–æ–∫ —Å—á–µ—Ç–æ–≤, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ–∑–≤–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞–º.

### –ö–µ–π—Å 2: –ù–∞–π—Ç–∏ —Å—á–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ –£–ù–ü 12345678

**–®–∞–≥ 1**: –ù–∞–π—Ç–∏ customerId —á–µ—Ä–µ–∑ API –∫–ª–∏–µ–Ω—Ç–æ–≤ (–∏–ª–∏ MongoDB):
```javascript
db.customers.findOne({ unp: "12345678" })
```

**–®–∞–≥ 2**: –ü–æ–ª—É—á–∏—Ç—å —Å—á–µ—Ç–∞:
```bash
GET /api/v1/reports/invoices?customerId=<customerId_from_step1>
```

### –ö–µ–π—Å 3: –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≤ Excel

```python
import requests
import pandas as pd

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—á–µ—Ç–∞
response = requests.get(
    'http://localhost:3001/api/v1/reports/invoices?limit=1000',
    headers={'Authorization': f'Bearer {token}'}
)

invoices = response.json()['invoices']

# –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ DataFrame
df = pd.DataFrame(invoices)

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ Excel
df.to_excel('invoices_export.xlsx', index=False)
```

### –ö–µ–π—Å 4: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—á–µ—Ç–æ–≤

```bash
# –°—á–µ—Ç–∞ —Å –ø—Ä–æ—Å—Ä–æ—á–∫–æ–π > 90 –¥–Ω–µ–π –∏ —Å—É–º–º–æ–π > 50000
GET /api/v1/reports/invoices?minDaysOverdue=91&minAmount=50000&sortBy=totalAmount&sortOrder=desc
```

---

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã

### –í—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–æ–ª—è

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –Ω–∞ –ª–µ—Ç—É:

- `outstandingAmount` = `totalAmount - paidAmount`
- –ü—Ä–æ—Å—Ä–æ—á–∫–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ `dueDate < —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞`
- `debtWorkStatus` –º–æ–∂–µ—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–Ω–µ–π –ø—Ä–æ—Å—Ä–æ—á–∫–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è 50 –∑–∞–ø–∏—Å–µ–π
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é
- –î–ª—è –±–æ–ª—å—à–∏—Ö –≤—ã–±–æ—Ä–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º

–î–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO 8601:
- `2025-11-14`
- `2025-11-14T00:00:00.000Z`

### Populate –∫–ª–∏–µ–Ω—Ç–∞

API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª–∏–µ–Ω—Ç–µ (populate), –µ—Å–ª–∏ –æ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–∞.

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ API

- `GET /api/v1/reports/dashboard/summary` - –û–±—â–∞—è —Å–≤–æ–¥–∫–∞ –ø–æ –î–ó
- `GET /api/v1/reports/top-debtors` - –¢–æ–ø –¥–æ–ª–∂–Ω–∏–∫–æ–≤
- `GET /api/v1/reports/customers-overdue` - –ö–ª–∏–µ–Ω—Ç—ã —Å –ø—Ä–æ—Å—Ä–æ—á–∫–æ–π
- `GET /api/v1/reports/contract-analysis` - –ê–Ω–∞–ª–∏–∑ –ø–æ –¥–æ–≥–æ–≤–æ—Ä–∞–º
- `POST /api/v1/reports/invoices/apply-payment` - –ü—Ä–∏–º–µ–Ω–∏—Ç—å –æ–ø–ª–∞—Ç—É –∫ —Å—á–µ—Ç—É

---

## –ö–æ–¥—ã –æ—à–∏–±–æ–∫

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏—á–∏–Ω–∞ |
|-----|----------|---------|
| `200` | –£—Å–ø–µ—à–Ω–æ | –ó–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω |
| `401` | –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω |
| `400` | –ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å | –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ |
| `500` | –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ | –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö |

---

## –í–µ—Ä—Å–∏—è API

**–í–µ—Ä—Å–∏—è**: `v1`  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 2025-11-14  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. –í—Å–µ –¥–∞—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO 8601 —Å UTC –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–æ–Ω–æ–π
2. –°—É–º–º—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —á–∏—Å–ª–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (–Ω–µ —Å—Ç—Ä–æ–∫–∏)
3. –ü—É—Å—Ç—ã–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –º–æ–≥—É—Ç –±—ã—Ç—å `null` –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å
4. –ü–æ–ª–µ `customer` –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤ –ë–î –µ—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ

