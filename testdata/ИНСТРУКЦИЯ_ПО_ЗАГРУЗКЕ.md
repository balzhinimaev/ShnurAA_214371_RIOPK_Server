# üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —ç–≤–æ–ª—é—Ü–∏–∏ –î–ó

## –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –¥–µ–±–∏—Ç–æ—Ä—Å–∫–æ–π –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ –£–ù–ü **12345678** (–û–û–û "–ê–ª—å—Ñ–∞–¢–æ—Ä–≥") —á–µ—Ä–µ–∑ –≤—Å–µ —ç—Ç–∞–ø—ã:

1. **1phase.csv** - –ü–æ—è–≤–ª–µ–Ω–∏–µ –î–ó (–±–µ–∑ –ø—Ä–æ—Å—Ä–æ—á–∫–∏)
2. **2phase.csv** - –ü—Ä–æ—Å—Ä–æ—á–∫–∞ (–∫–ª–∏–µ–Ω—Ç –Ω–µ –ø–ª–∞—Ç–∏—Ç)
3. **3phase.csv** - –ß–∞—Å—Ç–∏—á–Ω–æ–µ –ø–æ–≥–∞—à–µ–Ω–∏–µ

---

## üîë –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π Endpoint

**–í–ê–ñ–ù–û!** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ endpoint –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –∏–∑ 1–°:

```
POST /api/v1/data-uploads/1c-invoices
```

**–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** —Å—Ç–∞—Ä—ã–π endpoint `/api/v1/data-uploads/invoices` (–æ–Ω —Ç—Ä–µ–±—É–µ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏)!

---

## üìù –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–≤–æ–π —Ñ–∞–∑—ã (–ø–æ—è–≤–ª–µ–Ω–∏–µ –î–ó)

**–î–∞—Ç–∞ —Å–∏–º—É–ª—è—Ü–∏–∏**: 10.09.2024

```bash
# –í Postman –∏–ª–∏ —á–µ—Ä–µ–∑ curl:
POST http://localhost:3000/api/v1/data-uploads/1c-invoices
Authorization: Bearer YOUR_TOKEN
Content-Type: multipart/form-data

file: testdata/1phase.csv
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
```json
{
  "message": "–§–∞–π–ª 1C —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω.",
  "totalRows": 1,
  "processedRows": 1,
  "createdCustomers": 1,
  "createdInvoices": 1,
  "updatedInvoices": 0,
  "skippedRows": 0,
  "errors": []
}
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ Dashboard** (GET /api/v1/reports/dashboard/summary):
```json
{
  "totalReceivables": 5000,
  "overdueReceivables": 0,
  "currentReceivables": 5000,
  "overduePercentage": 0,
  "agingStructure": [
    {"bucket": "Current", "amount": 5000, "count": 1}
  ]
}
```

---

### –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Ç–æ—Ä–æ–π —Ñ–∞–∑—ã (–ø—Ä–æ—Å—Ä–æ—á–∫–∞)

**–î–∞—Ç–∞ —Å–∏–º—É–ª—è—Ü–∏–∏**: 10.10.2024 (9 –¥–Ω–µ–π –ø–æ—Å–ª–µ —Å—Ä–æ–∫–∞ –æ–ø–ª–∞—Ç—ã)

```bash
POST http://localhost:3000/api/v1/data-uploads/1c-invoices
Authorization: Bearer YOUR_TOKEN
Content-Type: multipart/form-data

file: testdata/2phase.csv
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
```json
{
  "message": "–§–∞–π–ª 1C —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω.",
  "totalRows": 1,
  "processedRows": 1,
  "createdCustomers": 0,
  "createdInvoices": 0,
  "updatedInvoices": 0,
  "skippedRows": 1,  // ‚Üê –ü—Ä–æ–ø—É—â–µ–Ω–∞, —Ç.–∫. –¥–∞–Ω–Ω—ã–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å
  "errors": []
}
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ Dashboard** (–¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!):
```json
{
  "totalReceivables": 5000,
  "overdueReceivables": 5000,      // ‚Üê –¢–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–∞!
  "currentReceivables": 0,
  "overduePercentage": 100,
  "averagePaymentDelayDays": 9,
  "agingStructure": [
    {"bucket": "Current", "amount": 0, "count": 0},
    {"bucket": "1-30", "amount": 5000, "count": 1}  // ‚Üê –ü–µ—Ä–µ–µ—Ö–∞–ª–∞!
  ]
}
```

---

### –®–∞–≥ 3: –ó–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–µ—Ç—å–µ–π —Ñ–∞–∑—ã (—á–∞—Å—Ç–∏—á–Ω–æ–µ –ø–æ–≥–∞—à–µ–Ω–∏–µ)

**–î–∞—Ç–∞ —Å–∏–º—É–ª—è—Ü–∏–∏**: 11.11.2024 (41 –¥–µ–Ω—å –ø–æ—Å–ª–µ —Å—Ä–æ–∫–∞ –æ–ø–ª–∞—Ç—ã)

```bash
POST http://localhost:3000/api/v1/data-uploads/1c-invoices
Authorization: Bearer YOUR_TOKEN
Content-Type: multipart/form-data

file: testdata/3phase.csv
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
```json
{
  "message": "–§–∞–π–ª 1C —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω.",
  "totalRows": 1,
  "processedRows": 1,
  "createdCustomers": 0,
  "createdInvoices": 0,
  "updatedInvoices": 1,  // ‚Üê –û–ë–ù–û–í–õ–ï–ù!
  "skippedRows": 0,
  "errors": []
}
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ Dashboard**:
```json
{
  "totalReceivables": 3000,        // ‚Üê –£–º–µ–Ω—å—à–∏–ª–∞—Å—å!
  "overdueReceivables": 3000,
  "currentReceivables": 0,
  "overduePercentage": 100,
  "averagePaymentDelayDays": 41,   // ‚Üê –£–≤–µ–ª–∏—á–∏–ª–∞—Å—å!
  "agingStructure": [
    {"bucket": "Current", "amount": 0, "count": 0},
    {"bucket": "1-30", "amount": 0, "count": 0},
    {"bucket": "31-60", "amount": 3000, "count": 1}  // ‚Üê –í –∫—Ä–∞—Å–Ω–æ–π –∑–æ–Ω–µ!
  ]
}
```

---

## üéØ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞

### –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª–∏–µ–Ω—Ç–µ –ø–æ –£–ù–ü:

```bash
GET http://localhost:3000/api/v1/customers
Authorization: Bearer YOUR_TOKEN
```

–ù–∞–π–¥–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç–∞ —Å `unp: "12345678"` –∏ –∑–∞–ø–æ–º–Ω–∏—Ç–µ –µ–≥–æ `customerId`.

### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—á–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞:

```bash
GET http://localhost:3000/api/v1/reports/invoices?customerId=CUSTOMER_ID
Authorization: Bearer YOUR_TOKEN
```

–í—ã —É–≤–∏–¥–∏—Ç–µ:
```json
{
  "invoices": [
    {
      "invoiceNumber": "–ê–ö–¢-2024-0500",
      "totalAmount": 5000,
      "paidAmount": 2000,
      "outstandingAmount": 3000,
      "status": "OVERDUE",
      "debtWorkStatus": "CLAIM",
      "daysOverdue": 41
    }
  ]
}
```

---

## üìä –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã

### –¢–æ–ø –¥–æ–ª–∂–Ω–∏–∫–æ–≤:
```bash
GET http://localhost:3000/api/v1/reports/top-debtors?limit=10
```

### ABC-–∞–Ω–∞–ª–∏–∑:
```bash
GET http://localhost:3000/api/v1/reports/abc-analysis
```

### –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏ —Ä–∏—Å–∫–æ–≤:
```bash
GET http://localhost:3000/api/v1/reports/risk-concentration
```

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏

### –û—à–∏–±–∫–∞: "–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏"

**–ü—Ä–∏—á–∏–Ω–∞**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π endpoint.

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/api/v1/data-uploads/1c-invoices`, –∞ –Ω–µ `/invoices`!

---

### –û—à–∏–±–∫–∞: "–ö–ª–∏–µ–Ω—Ç —Å –£–ù–ü ... —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"

**–ü—Ä–∏—á–∏–Ω–∞**: –ö–ª–∏–µ–Ω—Ç —É–∂–µ —Å–æ–∑–¥–∞–Ω –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ.

**–†–µ—à–µ–Ω–∏–µ**: –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–∫–∞—Ö –∫–ª–∏–µ–Ω—Ç –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π.

---

### –°—á–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è (skippedRows = 1)

**–ü—Ä–∏—á–∏–Ω–∞**: –î–∞–Ω–Ω—ã–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∑–∞–≥—Ä—É–∑–∫–∏.

**–†–µ—à–µ–Ω–∏–µ**: –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å `paidAmount`.

---

## üìå –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ó–∞–≥—Ä—É–∂–∞–π—Ç–µ —Ñ–∞–π–ª—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ**: 1phase ‚Üí 2phase ‚Üí 3phase
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π endpoint**: `/api/v1/data-uploads/1c-invoices`
3. **–ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**: `Bearer YOUR_TOKEN`
4. **Dashboard –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ (–¥–∞–Ω–Ω—ã–µ –Ω–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è)
5. **–ü—Ä–æ—Å—Ä–æ—á–∫–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã

---

## üéì –î–ª—è —Å–¥–∞—á–∏ –ø—Ä–æ–µ–∫—Ç–∞

–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å —Ä–∞–∑–Ω—ã–º–∏ –£–ù–ü:

```csv
# –ö–ª–∏–µ–Ω—Ç 1: –í —Å—Ä–æ–∫
01.10.2024,01.11.2024,–ê–ö–¢-001,–û–û–û "–ê–ª—å—Ñ–∞–¢–æ—Ä–≥",11111111,–î-001,–°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –ü–ö–¢,10000,30,01.12.2024,0,,,–ò–≤–∞–Ω–æ–≤,

# –ö–ª–∏–µ–Ω—Ç 2: –õ–µ–≥–∫–∞—è –ø—Ä–æ—Å—Ä–æ—á–∫–∞
01.09.2024,01.10.2024,–ê–ö–¢-002,–û–û–û "–ë–µ—Ç–∞–ö–æ–º–ø–∞–Ω–∏",22222222,–î-002,–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ö–ö–¢,15000,30,01.11.2024,0,,,–ü–µ—Ç—Ä–æ–≤,

# –ö–ª–∏–µ–Ω—Ç 3: –°—Ä–µ–¥–Ω—è—è –ø—Ä–æ—Å—Ä–æ—á–∫–∞
01.08.2024,01.09.2024,–ê–ö–¢-003,–û–û–û "–ì–∞–º–º–∞–ì—Ä—É–ø–ø",33333333,–î-003,–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –ö–ö–¢,20000,30,01.10.2024,8000,10.11.2024,–°–∏–¥–æ—Ä–æ–≤,

# –ö–ª–∏–µ–Ω—Ç 4: –ì–ª—É–±–æ–∫–∞—è –ø—Ä–æ—Å—Ä–æ—á–∫–∞
01.07.2024,01.08.2024,–ê–ö–¢-004,–û–û–û "–î–µ–ª—å—Ç–∞–°–µ—Ä–≤–∏—Å",44444444,–î-004,–°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –ü–ö–¢,50000,30,01.09.2024,0,,,–ò–≤–∞–Ω–æ–≤,

# –ö–ª–∏–µ–Ω—Ç 5: –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø–ª–∞—á–µ–Ω
01.06.2024,01.07.2024,–ê–ö–¢-005,–û–û–û "–≠–ø—Å–∏–ª–æ–Ω–õ–¢–î",55555555,–î-005,–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ö–ö–¢,12000,30,01.08.2024,12000,15.08.2024,–ü–µ—Ç—Ä–æ–≤,
```

–≠—Ç–æ –¥–∞—Å—Ç –±–æ–ª–µ–µ –ø–æ–ª–Ω—É—é –∫–∞—Ä—Ç–∏–Ω—É –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —Å–∏—Å—Ç–µ–º—ã!

