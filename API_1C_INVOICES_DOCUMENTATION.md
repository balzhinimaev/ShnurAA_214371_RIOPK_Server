# üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –ó–∞–≥—Ä—É–∑–∫–∞ —Å—á–µ—Ç–æ–≤ –∏–∑ 1–°

## üîó –≠–Ω–¥–ø–æ–∏–Ω—Ç

```
POST http://localhost:3000/api/v1/data-uploads/1c-invoices
```

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: Bearer Token (JWT) –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–æ–ª—å `ADMIN` –∏–ª–∏ `ANALYST`
- **Header**: `Authorization: Bearer {–≤–∞—à_jwt_—Ç–æ–∫–µ–Ω}`

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
–°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/v1/auth/login`:
```bash
POST /api/v1/auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123"
}
```

–û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–∫–µ–Ω:
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": { ... }
}
```

---

## üì§ –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞

### Content-Type
```
multipart/form-data
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|--------------|----------|
| `file` | File | ‚úÖ –î–∞ | CSV —Ñ–∞–π–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ 1–° |

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ñ–∞–π–ª–∞
- **–¢–∏–ø —Ñ–∞–π–ª–∞**: CSV (`.csv`)
- **MIME type**: `text/csv`
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä**: 10 –ú–ë
- **–ö–æ–¥–∏—Ä–æ–≤–∫–∞**: UTF-8

---

## üìã –§–æ—Ä–º–∞—Ç CSV —Ñ–∞–π–ª–∞

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (–Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ)

| –ó–∞–≥–æ–ª–æ–≤–æ–∫ | –û–ø–∏—Å–∞–Ω–∏–µ | –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –ü—Ä–∏–º–µ—Ä |
|-----------|----------|------------|--------|
| `–î–∞—Ç–∞_–Ω–∞—á–∞–ª–∞_—É—Å–ª—É–≥–∏` | –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –æ–∫–∞–∑–∞–Ω–∏—è —É—Å–ª—É–≥–∏ | –î–∞—Ç–∞ | `01.01.2024` |
| `–î–∞—Ç–∞_–æ–∫–æ–Ω—á–∞–Ω–∏—è_—É—Å–ª—É–≥–∏` | –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è —É—Å–ª—É–≥–∏ | –î–∞—Ç–∞ | `31.01.2024` |
| `–ù–æ–º–µ—Ä_–∞–∫—Ç–∞` | –ù–æ–º–µ—Ä –∞–∫—Ç–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ invoiceNumber) | –°—Ç—Ä–æ–∫–∞ | `–ê–ö–¢-2024-001` |
| `–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç` | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ (–∫–ª–∏–µ–Ω—Ç–∞) | –°—Ç—Ä–æ–∫–∞ | `–û–û–û "–†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞"` |
| `–ò–ù–ù` | –£–ù–ü –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä) | –°—Ç—Ä–æ–∫–∞ | `123456789` |
| `–°—É–º–º–∞_–∫_–æ–ø–ª–∞—Ç–µ` | –û–±—â–∞—è —Å—É–º–º–∞ —Å—á–µ—Ç–∞ | –ß–∏—Å–ª–æ | `1500.50` –∏–ª–∏ `1500,50` |
| `–î–∞—Ç–∞_–ø–ª–∞–Ω–∏—Ä—É–µ–º–æ–π_–æ–ø–ª–∞—Ç—ã` | –ü–ª–∞–Ω–∏—Ä—É–µ–º–∞—è –¥–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã (dueDate) | –î–∞—Ç–∞ | `15.02.2024` |

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏

| –ó–∞–≥–æ–ª–æ–≤–æ–∫ | –û–ø–∏—Å–∞–Ω–∏–µ | –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-----------|----------|------------|----------------------|
| `–î–æ–≥–æ–≤–æ—Ä` | –ù–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–∞ | –°—Ç—Ä–æ–∫–∞ | - |
| `–¢–∏–ø_—É—Å–ª—É–≥–∏` | –¢–∏–ø —É—Å–ª—É–≥–∏ | –°—Ç—Ä–æ–∫–∞ | `OTHER` |
| `–°—Ä–æ–∫_–æ–ø–ª–∞—Ç—ã_–¥–Ω–µ–π` | –°—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã –≤ –¥–Ω—è—Ö | –ß–∏—Å–ª–æ | `30` |
| `–°—É–º–º–∞_–æ–ø–ª–∞—á–µ–Ω–æ` | –û–ø–ª–∞—á–µ–Ω–Ω–∞—è —Å—É–º–º–∞ | –ß–∏—Å–ª–æ | `0` |
| `–î–∞—Ç–∞_—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π_–æ–ø–ª–∞—Ç—ã` | –î–∞—Ç–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –æ–ø–ª–∞—Ç—ã | –î–∞—Ç–∞ | - |
| `–û—Å—Ç–∞—Ç–æ–∫_–∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏` | –û—Å—Ç–∞—Ç–æ–∫ –¥–æ–ª–≥–∞ | –ß–∏—Å–ª–æ | - |
| `–ú–µ–Ω–µ–¥–∂–µ—Ä` | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä | –°—Ç—Ä–æ–∫–∞ | - |
| `–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ` | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è/–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ | –°—Ç—Ä–æ–∫–∞ | - |

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞—Ç
- `dd.MM.yyyy` - `15.01.2024` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- `yyyy-MM-dd` - `2024-01-15`
- ISO 8601 - `2024-01-15T00:00:00Z`

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã —É—Å–ª—É–≥

| –ó–Ω–∞—á–µ–Ω–∏–µ –≤ CSV | ServiceType –≤ —Å–∏—Å—Ç–µ–º–µ |
|----------------|----------------------|
| `–°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –ü–ö–¢` | `PKT_SUPPORT` |
| `–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ö–ö–¢` | `KKT_INSTALLATION` |
| `–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –ö–ö–¢` | `KKT_SERVICE` |
| `–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ —Ç–æ—Ä–≥. –∞–≤—Ç–æ–º–∞—Ç–æ–≤` | `VENDING_SERVICE` |
| `–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ—Ä–≥. –∞–≤—Ç–æ–º–∞—Ç–∞` | `VENDING_INSTALLATION` |
| –õ—é–±–æ–µ –¥—Ä—É–≥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | `OTHER` |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ú–∞–ø–ø–∏–Ω–≥ –Ω–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É.

### –ü—Ä–∏–º–µ—Ä CSV —Ñ–∞–π–ª–∞

```csv
–î–∞—Ç–∞_–Ω–∞—á–∞–ª–∞_—É—Å–ª—É–≥–∏,–î–∞—Ç–∞_–æ–∫–æ–Ω—á–∞–Ω–∏—è_—É—Å–ª—É–≥–∏,–ù–æ–º–µ—Ä_–∞–∫—Ç–∞,–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç,–ò–ù–ù,–î–æ–≥–æ–≤–æ—Ä,–¢–∏–ø_—É—Å–ª—É–≥–∏,–°—É–º–º–∞_–∫_–æ–ø–ª–∞—Ç–µ,–°—Ä–æ–∫_–æ–ø–ª–∞—Ç—ã_–¥–Ω–µ–π,–î–∞—Ç–∞_–ø–ª–∞–Ω–∏—Ä—É–µ–º–æ–π_–æ–ø–ª–∞—Ç—ã,–°—É–º–º–∞_–æ–ø–ª–∞—á–µ–Ω–æ,–î–∞—Ç–∞_—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π_–æ–ø–ª–∞—Ç—ã,–û—Å—Ç–∞—Ç–æ–∫_–∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏,–ú–µ–Ω–µ–¥–∂–µ—Ä,–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
01.01.2024,31.01.2024,–ê–ö–¢-2024-001,–û–û–û "–†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞",123456789,–î–û–ì-2024-001,–°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –ü–ö–¢,1500.50,30,15.02.2024,0,,1500.50,–ò–≤–∞–Ω–æ–≤ –ò.–ò.,–ï–∂–µ–º–µ—Å—è—á–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
01.02.2024,29.02.2024,–ê–ö–¢-2024-002,–ò–ü –ü–µ—Ç—Ä–æ–≤ –ü.–ü.,987654321,–î–û–ì-2024-002,–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ö–ö–¢,2500.00,45,15.03.2024,1000.00,10.03.2024,1500.00,–°–∏–¥–æ—Ä–æ–≤ –°.–°.,–ß–∞—Å—Ç–∏—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞
```

---

## ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞

```json
{
  "message": "–§–∞–π–ª 1C —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω.",
  "totalRows": 150,
  "processedRows": 148,
  "createdCustomers": 25,
  "createdInvoices": 120,
  "updatedInvoices": 28,
  "skippedRows": 2,
  "errors": [
    "–°—Ç—Ä–æ–∫–∞ 45: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –Ω–æ–º–µ—Ä –∞–∫—Ç–∞",
    "–°—Ç—Ä–æ–∫–∞ 89: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —É—Å–ª—É–≥–∏"
  ]
}
```

### –ü–æ–ª—è –æ—Ç–≤–µ—Ç–∞

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `message` | string | –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ |
| `totalRows` | number | –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –≤ CSV —Ñ–∞–π–ª–µ |
| `processedRows` | number | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫ |
| `createdCustomers` | number | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ |
| `createdInvoices` | number | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –Ω–æ–≤—ã—Ö —Å—á–µ—Ç–æ–≤ |
| `updatedInvoices` | number | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—á–µ—Ç–æ–≤ |
| `skippedRows` | number | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫ (–¥—É–±–ª–∏–∫–∞—Ç—ã + –æ—à–∏–±–∫–∏) |
| `errors` | string[] | –ú–∞—Å—Å–∏–≤ –æ—à–∏–±–æ–∫ —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Å—Ç—Ä–æ–∫ |

### –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

1. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤**: –ö–ª–∏–µ–Ω—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ –£–ù–ü, –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
2. **–î—É–±–ª–∏–∫–∞—Ç—ã —Å—á–µ—Ç–æ–≤**: –°—á–µ—Ç–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ `–ù–æ–º–µ—Ä_–∞–∫—Ç–∞` + `–ò–ù–ù –∫–ª–∏–µ–Ω—Ç–∞`
   - –ï—Å–ª–∏ —Å—á–µ—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –æ–ø–ª–∞—Ç–∞ ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
   - –ï—Å–ª–∏ —Å—á–µ—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è
3. **–ß–∞—Å—Ç–∏—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –î–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å—Ç—Ä–æ–∫–∞—Ö, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

---

## ‚ùå –û—à–∏–±–∫–∏

### 400 Bad Request

**–ü—Ä–∏—á–∏–Ω—ã:**
- –§–∞–π–ª –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω
- –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø —Ñ–∞–π–ª–∞ (–Ω–µ CSV)
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤ CSV
- –ü—Ä–µ–≤—ã—à–µ–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (10 –ú–ë)

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "statusCode": 400,
  "message": "–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤ CSV. –û–∂–∏–¥–∞–ª–∏—Å—å: –î–∞—Ç–∞_–Ω–∞—á–∞–ª–∞_—É—Å–ª—É–≥–∏, –î–∞—Ç–∞_–æ–∫–æ–Ω—á–∞–Ω–∏—è_—É—Å–ª—É–≥–∏, –ù–æ–º–µ—Ä_–∞–∫—Ç–∞, –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç, –ò–ù–ù, –°—É–º–º–∞_–∫_–æ–ø–ª–∞—Ç–µ, –î–∞—Ç–∞_–ø–ª–∞–Ω–∏—Ä—É–µ–º–æ–π_–æ–ø–ª–∞—Ç—ã"
}
```

### 401 Unauthorized

**–ü—Ä–∏—á–∏–Ω—ã:**
- JWT —Ç–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- JWT —Ç–æ–∫–µ–Ω –Ω–µ–≤–∞–ª–∏–¥–µ–Ω –∏–ª–∏ –∏—Å—Ç–µ–∫
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "statusCode": 401,
  "message": "–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏: –Ω–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."
}
```

### 403 Forbidden

**–ü—Ä–∏—á–∏–Ω—ã:**
- –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø—Ä–∞–≤
- –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–æ–ª—å `ADMIN` –∏–ª–∏ `ANALYST`

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "statusCode": 403,
  "message": "–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω - —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–æ–ª—å ADMIN –∏–ª–∏ ANALYST."
}
```

### 500 Internal Server Error

**–ü—Ä–∏—á–∏–Ω—ã:**
- –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞
- –û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "statusCode": 500,
  "message": "–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞: {–æ–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏}"
}
```

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### cURL

```bash
curl -X POST http://localhost:3000/api/v1/data-uploads/1c-invoices \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -F "file=@/path/to/–≤—ã–≥—Ä—É–∑–∫–∞1c.csv"
```

### JavaScript (fetch)

```javascript
const formData = new FormData();
formData.append('file', fileInput.files[0]);

const response = await fetch('http://localhost:3000/api/v1/data-uploads/1c-invoices', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`
  },
  body: formData
});

if (response.ok) {
  const result = await response.json();
  console.log('–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å—Ç—Ä–æ–∫:', result.processedRows);
  console.log('–°–æ–∑–¥–∞–Ω–æ –∫–ª–∏–µ–Ω—Ç–æ–≤:', result.createdCustomers);
  console.log('–°–æ–∑–¥–∞–Ω–æ —Å—á–µ—Ç–æ–≤:', result.createdInvoices);
  console.log('–û–±–Ω–æ–≤–ª–µ–Ω–æ —Å—á–µ—Ç–æ–≤:', result.updatedInvoices);
  console.log('–û—à–∏–±–∫–∏:', result.errors);
} else {
  const error = await response.json();
  console.error('–û—à–∏–±–∫–∞:', error.message);
}
```

### TypeScript (axios)

```typescript
import axios from 'axios';

const formData = new FormData();
formData.append('file', csvFile);

try {
  const response = await axios.post(
    'http://localhost:3000/api/v1/data-uploads/1c-invoices',
    formData,
    {
      headers: {
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'multipart/form-data'
      }
    }
  );
  
  console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç:', response.data);
} catch (error) {
  if (axios.isAxiosError(error)) {
    console.error('–û—à–∏–±–∫–∞:', error.response?.data);
  }
}
```

### Postman

1. **–ú–µ—Ç–æ–¥**: `POST`
2. **URL**: `http://localhost:3000/api/v1/data-uploads/1c-invoices`
3. **Headers**:
   - `Authorization`: `Bearer {–≤–∞—à_—Ç–æ–∫–µ–Ω}`
4. **Body** ‚Üí `form-data`:
   - Key: `file` (—Ç–∏–ø: File)
   - Value: –≤—ã–±—Ä–∞—Ç—å CSV —Ñ–∞–π–ª

---

## üîç –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–æ–∫–∏

–ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ CSV –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞:
- ‚úÖ –ù–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞—Ç
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (—Å—É–º–º—ã > 0)
- ‚úÖ –ù–∞–ª–∏—á–∏–µ –£–ù–ü –∫–ª–∏–µ–Ω—Ç–∞

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

- –°—Ç—Ä–æ–∫–∏ —Å –æ—à–∏–±–∫–∞–º–∏ **–ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è**
- –û—à–∏–±–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤ `errors` –æ—Ç–≤–µ—Ç–∞
- –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è

---

## üìä –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤

- –ö–ª–∏–µ–Ω—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ –£–ù–ü
- –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —Å —Ç–∞–∫–∏–º –£–ù–ü —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
- –ü—Ä–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–∏ –∏–º–µ–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞ ‚Üí –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –ª–æ–≥, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Å—á–µ—Ç–æ–≤

- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ: `–ù–æ–º–µ—Ä_–∞–∫—Ç–∞` + `–ò–ù–ù –∫–ª–∏–µ–Ω—Ç–∞`
- –ï—Å–ª–∏ —Å—á–µ—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
  - **–ò–∑–º–µ–Ω–∏–ª–∞—Å—å –æ–ø–ª–∞—Ç–∞** ‚Üí —Å—á–µ—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (`updatedInvoices++`)
  - **–û–ø–ª–∞—Ç–∞ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å** ‚Üí —Å—Ç—Ä–æ–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è (`skippedRows++`)

### –†–∞—Å—á–µ—Ç —Å—Ç–∞—Ç—É—Å–æ–≤

**–°—Ç–∞—Ç—É—Å —Å—á–µ—Ç–∞ (`status`):**
- `PAID` - –µ—Å–ª–∏ `–°—É–º–º–∞_–æ–ø–ª–∞—á–µ–Ω–æ >= –°—É–º–º–∞_–∫_–æ–ø–ª–∞—Ç–µ`
- `OVERDUE` - –µ—Å–ª–∏ `–î–∞—Ç–∞_–ø–ª–∞–Ω–∏—Ä—É–µ–º–æ–π_–æ–ø–ª–∞—Ç—ã < —Ç–µ–∫—É—â–∞—è_–¥–∞—Ç–∞` –∏ —Å—á–µ—Ç –Ω–µ –æ–ø–ª–∞—á–µ–Ω
- `OPEN` - –≤ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö

**–°—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç—ã —Å –¥–æ–ª–≥–æ–º (`debtWorkStatus`):**
- `IN_TIME` - –ø—Ä–æ—Å—Ä–æ—á–∫–∞ 0 –¥–Ω–µ–π
- `CALL` - –ø—Ä–æ—Å—Ä–æ—á–∫–∞ 1-30 –¥–Ω–µ–π
- `CLAIM` - –ø—Ä–æ—Å—Ä–æ—á–∫–∞ 31-60 –¥–Ω–µ–π
- `PRE_TRIAL` - –ø—Ä–æ—Å—Ä–æ—á–∫–∞ 61-90 –¥–Ω–µ–π
- `TRIAL` - –ø—Ä–æ—Å—Ä–æ—á–∫–∞ 91-180 –¥–Ω–µ–π
- `COLLECTION` - –ø—Ä–æ—Å—Ä–æ—á–∫–∞ –±–æ–ª–µ–µ 180 –¥–Ω–µ–π
- `CLOSED` - —Å—á–µ—Ç –æ–ø–ª–∞—á–µ–Ω

### –í—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–æ–ª—è

- **–î–∞—Ç–∞ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç–∞** (`issueDate`) = `–î–∞—Ç–∞_–æ–∫–æ–Ω—á–∞–Ω–∏—è_—É—Å–ª—É–≥–∏`
- **–û—Å—Ç–∞—Ç–æ–∫ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏** (`outstandingAmount`) = `–°—É–º–º–∞_–∫_–æ–ø–ª–∞—Ç–µ - –°—É–º–º–∞_–æ–ø–ª–∞—á–µ–Ω–æ`

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π

- [ ] –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ CSV (`.csv`)
- [ ] –ö–æ–¥–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–∞: UTF-8
- [ ] –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏
- [ ] –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç (—Ç–æ—á–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ, –≤–∫–ª—é—á–∞—è —Ä–µ–≥–∏—Å—Ç—Ä)
- [ ] –î–∞—Ç—ã –≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (`dd.MM.yyyy` —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- [ ] –°—É–º–º—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ—á–∫—É –∏–ª–∏ –∑–∞–ø—è—Ç—É—é –∫–∞–∫ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –¥—Ä–æ–±–Ω–æ–π —á–∞—Å—Ç–∏
- [ ] –£–ù–ü –∫–ª–∏–µ–Ω—Ç–æ–≤ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- [ ] –ù–æ–º–µ—Ä–∞ –∞–∫—Ç–æ–≤ —É–Ω–∏–∫–∞–ª—å–Ω—ã –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
- [ ] –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 10 –ú–ë
- [ ] –£ –≤–∞—Å –µ—Å—Ç—å –≤–∞–ª–∏–¥–Ω—ã–π JWT —Ç–æ–∫–µ–Ω
- [ ] –í–∞—à–∞ —Ä–æ–ª—å: `ADMIN` –∏–ª–∏ `ANALYST`

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

- `POST /api/v1/auth/login` - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞
- `POST /api/v1/data-uploads/invoices` - –ó–∞–≥—Ä—É–∑–∫–∞ —Å—á–µ—Ç–æ–≤ –≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- `GET /api/v1/reports/*` - –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ –ø–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã**: –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
2. **–ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –ö–ª–∏–µ–Ω—Ç—ã –∏ —Å—á–µ—Ç–∞ –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –∑–∞–≥—Ä—É–∑–∏–≤—à–µ–º—É —Ñ–∞–π–ª
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, —Å—Ç—Ä–æ–∫–∞ –∑–∞ —Å—Ç—Ä–æ–∫–æ–π
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è. –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Swagger UI: `http://localhost:3000/api-docs`*

